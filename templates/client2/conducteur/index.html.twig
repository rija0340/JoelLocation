{% extends 'baseClient2.html.twig' %}

{% block title %}Mes conducteurs
{% endblock %}

{% block stylesheets %}
	{# Ajoute ici si besoin des styles custom #}
{% endblock %}

{% block body %}
	<div class="space-y-8">
		<header class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
			<div>
				<div class="flex items-center mb-2">
					<h1 class="text-3xl font-bold title-red">Mes conducteurs</h1>
					<div class="ml-4 w-12 h-1 bg-joel-red"></div>
				</div>
				<p class="text-gray-600">Gérez vos conducteurs autorisés</p>
			</div>
			{% if conducteurs|length < 2 %}
				<a href="{{ path('client_newConducteur') }}"
				   class="inline-flex items-center px-6 py-3 bg-joel-red text-white font-semibold rounded-lg hover:bg-joel-red-dark transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
					<i class="fas fa-plus mr-2"></i>
					Nouveau conducteur
				</a>
			{% endif %}
		</header>

		<div class="bg-white rounded-lg shadow-lg overflow-hidden hover-lift">
			<div class="p-6">

			{% if conducteurs|length > 0 %}
				<div class="overflow-x-auto">
					<table class="w-full min-w-[600px]">
						<thead>
							<tr class="bg-gradient-to-r from-joel-beige to-white">
								<th class="py-4 px-6 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider rounded-tl-lg">Nom</th>
								<th class="py-4 px-6 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">Prénom</th>
								<th class="py-4 px-6 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">Permis</th>
								<th class="py-4 px-6 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">Principal</th>
								<th class="py-4 px-6 text-right text-sm font-semibold text-gray-700 uppercase tracking-wider rounded-tr-lg">Actions</th>
							</tr>
						</thead>
						<tbody class="bg-white divide-y divide-gray-200">
							{% for conducteur in conducteurs %}
								<tr class="hover:bg-gray-50 transition-colors duration-200">
									<td class="py-4 px-6 font-medium text-gray-900">{{ conducteur.nom|default('N/A') }}</td>
									<td class="py-4 px-6 text-gray-700">{{ conducteur.prenom|default('N/A') }}</td>
									<td class="py-4 px-6">
										<div class="space-y-1">
											<p class="text-sm text-gray-700">
												<span class="font-medium">Numéro :</span>
												{{ conducteur.numeroPermis|default('N/A') }}</p>
											<p class="text-sm text-gray-700">
												<span class="font-medium">Délivré le :</span>
												{{ conducteur.dateDelivrance ? conducteur.dateDelivrance|date('d M Y') : 'N/A' }}</p>
											<p class="text-sm text-gray-700">
												<span class="font-medium">Ville :</span>
												{{ conducteur.villeDelivrance|default('N/A') }}</p>
										</div>
									</td>
									<td class="py-4 px-6">
										{% if conducteur.isPrincipal %}
											<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
												<i class="fas fa-star mr-1"></i>
												Principal
											</span>
										{% endif %}
									</td>
									<td class="py-4 px-6">
										<div class="flex justify-end space-x-2">
											<a href="{{ path('conducteur_edit', {'id': conducteur.id}) }}"
											   class="inline-flex items-center justify-center w-10 h-10 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors duration-200 group"
											   title="Modifier">
												<i class="fas fa-edit group-hover:scale-110 transition-transform duration-200"></i>
											</a>
											<form method="post" action="{{ path('conducteur_delete', {'id': conducteur.id}) }}" onsubmit="return confirm('Êtes-vous sûre de vouloir supprimer ce conducteur ?');" class="inline-block">
												<input type="hidden" name="_method" value="DELETE"/>
												<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ conducteur.id) }}"/>
												<button class="inline-flex items-center justify-center w-10 h-10 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors duration-200 group"
														title="Supprimer" type="submit">
													<i class="fas fa-trash-alt group-hover:scale-110 transition-transform duration-200"></i>
												</button>
											</form>
										</div>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>

			{% else %}
				{% include 'client2/conducteur/parts/_empty_state.html.twig' %}
			{% endif %}
		</div>
	</div>
</div>

{% endblock %}

{% block javascripts %}
	{# <script src="{{ asset('js/client/pop-up/conducteur.js') }}"></script> #}
{% endblock %}
