{% extends 'baseClient2.html.twig' %}

{% block title %}
	options et garanties
{% endblock %}
{% block stylesheets %}

	<link href="{{ asset( 'css/client/sidebarResaResume.css')}}" rel="stylesheet">
	<link href="{{ asset( 'css/client/step3InfosCtab-activelient.css')}}" rel="stylesheet">
	<style>
		#paypal-button-container {
			display: flex;
			justify-content: center;
			align-items: center; /* optional, for vertical centering */
			margin-top: 1rem;
		}
	</style>
	{# &buyer-country=FR add this if dev credentials, remove if prod #}
	<script src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id|url_encode }}&locale=fr_FR&currency=EUR&components=buttons&enable-funding=venmo,paylater&disable-funding=card" data-sdk-integration-source="developer-studio"></script>
{% endblock %}
{% block nav %}{% endblock %}
{% block body %}

	<header class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 mb-8">
		<div>
			<h1 class="text-3xl title-red">Finalisation de la réservation</h1>
			{# <p class="text-gray-500">Consultez et gérez vos locations de voitures</p> #}
		</div>
	</header>

	<div class="flex flex-col md:flex-row gap-6">

		<div class="w-full md:w-1/4">
			{% include "client2/reservation/nouvelle_resa/parts/sidebarResaResume.html.twig" %}
		</div>
		<div class="w-full md:w-3/4 ">
			{{ form_start(formClient) }}

			<!-- Champs cachés pour PayPal -->
			<input type="hidden" id="montant" value="{{ devis.prix }}">
			<input
			type="hidden" id="devisId" value="{{ devis.numero }}">

			<!-- Informations client -->
			<div class="bg-white shadow-md p-6 space-y-6">
				<h3 class="text-2xl font-bold text-center">Mes informations</h3>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
					<div>
						<label class="block text-sm font-medium text-gray-700">
							<span>Nom *</span>
						</label>
						{{ form_widget(formClient.nom, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700">
							<span>Prénom *</span>
						</label>
						{{ form_widget(formClient.prenom, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700">
							<span>Sexe *</span>
						</label>
						{{ form_widget(formClient.sexe, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700">
							<span>Portable *</span>
						</label>
						{{ form_widget(formClient.portable, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
					</div>
					<div class="md:col-span-2">
						<label class="block text-sm font-medium text-gray-700">
							<span>Email *</span>
						</label>
						{{ form_widget(formClient.mail, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
					</div>
				</div>
			</div>

			<!-- Paiement -->
			<div class="bg-white shadow-md p-6 mt-6 space-y-4">
				<h3 class="text-2xl font-bold text-center">Mode de paiement</h3>
				<p class="text-sm text-gray-600 text-center">
					Mode de paiement par PayPal. Pour valider votre réservation, vous devez effectuer un premier paiement. Une fois le paiement effectué, un email de confirmation vous sera envoyé.
				</p>
				<div id="paypal-button-container" class="flex justify-center items-center mt-4" style="min-height: 60px;"></div>

			</div>

			<!-- Conditions générales -->
			<div class="bg-white shadow-md p-6 mt-6 space-y-4">
				<h3 class="text-2xl font-bold text-center">Conditions générales de location</h3>
				<label class="flex items-start gap-2 cursor-pointer">
					<input type="checkbox" name="conditionGeneralVente" id="conditionGeneralVente" class="border border-gray-300 rounded text-joel-red focus:ring-joel-red">
					<span class="text-sm">
						Je reconnais avoir pris connaissance des
						<a href="/cgl/Joel location conditions générales de location_Version 1.0.pdf" class="text-joel-red hover:underline">
							conditions générales de location
						</a>
						que j'accepte sans réserve.
					</span>
				</label>

			</div>

			<!-- Bouton de validation -->
			<div
				class="text-center mt-6">{# <button type="button" class="border border-gray-300 text-gray-700 hover:bg-gray-100 px-4 py-2 rounded-lg transition-all duration-300" id="validerPaiement">Je confirme</button> #}
			</div>

			{{ form_end(formClient) }}

		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script src="{{ asset('js/client/reservation/validation_devis/step3infosClient.js')}}"></script>
	<script src="{{ asset('js/client/payement/paypal.js')}}"></script>
{% endblock %}
