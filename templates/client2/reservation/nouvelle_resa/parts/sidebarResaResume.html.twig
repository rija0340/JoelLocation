<!-- Reservation Summary Card -->
<div class="bg-white border border-gray-200 rounded-lg shadow-sm">
	<!-- Header -->
	<div class="border-b border-gray-200 p-6">
		<h3 class="text-2xl font-bold text-joel-red flex items-center">
			<i class="fas fa-file-alt mr-3 text-joel-red"></i>
			Votre réservation
		</h3>
	</div>

	<!-- Vehicle Information -->
	<div class="p-6 border-b border-gray-200">
		<div class="text-center">
			<h4 class="text-xl font-semibold text-joel-dark mb-3">
				{{ devis.vehicule.marque }} {{ devis.vehicule.modele }}
			</h4>
			<div class="rounded-lg overflow-hidden bg-gray-50 p-4">
				<img src="{{ vich_uploader_asset(devis.vehicule, 'imageFile') }}"
					 alt="{{ devis.vehicule.marque }} {{ devis.vehicule.modele }}"
					 class="w-full h-48 object-contain rounded-lg">
			</div>
		</div>
	</div>

	<!-- Rental Details -->
	<div class="p-6 space-y-6">
		<!-- Pickup Location -->
		<div class="bg-gray-50 rounded-lg p-4">
			<h5 class="text-lg font-semibold text-joel-red mb-3 flex items-center">
				<i class="fas fa-map-marker-alt text-joel-red mr-2"></i>
				Agence départ
			</h5>
			<div class="text-base text-gray-800 space-y-1">
				<div class="font-medium" id="agence_depart">{{ devis.agenceDepart }}</div>
				<div class="text-gray-600" id="date_depart">{{ devis.dateDepart | date('d/m/Y à H:i') }}</div>
			</div>
		</div>

		<!-- Return Location -->
		<div class="bg-gray-50 rounded-lg p-4">
			<h5 class="text-lg font-semibold text-joel-red mb-3 flex items-center">
				<i class="fas fa-map-marker-alt text-joel-red mr-2"></i>
				Agence retour
			</h5>
			<div class="text-base text-gray-800 space-y-1">
				<div class="font-medium" id="agence_retour">{{ devis.agenceRetour }}</div>
				<div class="text-gray-600" id="date_retour">{{ devis.dateRetour | date('d/m/Y à H:i') }}</div>
			</div>
		</div>

		<!-- Included Services -->
		<div class="bg-gray-50 rounded-lg p-4">
			<h5 class="text-lg font-semibold text-joel-red mb-3 flex items-center">
				<i class="fas fa-check-circle text-joel-red mr-2"></i>
				Prestations incluses
			</h5>
			<ul class="space-y-2 text-base text-gray-800">
				<li class="flex items-start">
					<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
					<span>Kilométrage Illimité</span>
				</li>
				<li class="flex items-start">
					<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
					<span>Assurance accidents causés aux tiers</span>
				</li>
				<li class="flex items-start">
					<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
					<span>Assurance responsabilité civile</span>
				</li>
				<li class="flex items-start">
					<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
					<span>Assurance collision (CDW)</span>
				</li>
				<li class="flex items-start">
					<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
					<span>TVA 8.5 %</span>
				</li>
			</ul>
		</div>

		<!-- Base Price -->
		<div class="bg-gray-50 rounded-lg p-4">
			<h5 class="text-lg font-semibold text-joel-red mb-3 flex items-center">
				<i class="fas fa-tag text-joel-red mr-2"></i>
				Prix de base de location
			</h5>
			<div class="text-center">
				<div class="text-2xl font-bold text-joel-dark">{{ devis.tarifVehicule }}€</div>
				<div class="text-base text-gray-600 mt-1">
					soit {{ (devis.tarifVehicule / devis.duree)|number_format(2, '.', '') }}€ / jour
				</div>
			</div>
		</div>

		<!-- Options -->
		{% if devis.devisOptions|length > 0 or devis.conducteur %}
			<div class="bg-gray-50 rounded-lg p-4">
				<h5 class="text-lg font-semibold text-joel-red mb-3 flex items-center">
					<i class="fas fa-plus-circle text-joel-red mr-2"></i>
					Option(s)
				</h5>
				<ul class="space-y-3 text-base text-gray-800">
					{% if devis.conducteur %}
						<li class="flex justify-between items-start">
							<div class="flex items-start">
								<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
								<span>Conducteur additionnel</span>
							</div>
							<div class="font-semibold text-joel-dark">{{ prixConductSuppl }}€</div>
						</li>
					{% endif %}
					{% for option in devis.devisOptions %}
						<li class="flex justify-between items-start">
							<div class="flex items-start">
								<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
								<span>
									{{ option.opt.appelation }}
									{% if option.opt.appelation matches '/Siège/' %}
										(nbr : {{ option.quantity }})
									{% endif %}
								</span>
							</div>
							<div class="font-semibold text-joel-dark">{{ (option.opt.prix * option.quantity)|number_format(2, ',', ' ') }}€</div>
						</li>
					{% endfor %}
				</ul>
			</div>
		{% endif %}

		<!-- Guarantees -->
		{% if devis.garanties|length > 0 %}
			<div class="bg-gray-50 rounded-lg p-4">
				<h5 class="text-lg font-semibold text-joel-red mb-3 flex items-center">
					<i class="fas fa-shield-alt text-joel-red mr-2"></i>
					Garantie(s)
				</h5>
				<ul class="space-y-3 text-base text-gray-800">
					{% for garantie in devis.garanties %}
						<li class="flex justify-between items-start">
							<div class="flex items-start">
								<i class="fas fa-check text-joel-red mr-3 mt-1 flex-shrink-0"></i>
								<span>{{ garantie.appelation }}</span>
							</div>
							<div class="font-semibold text-joel-dark">{{ garantie.prix }}€</div>
						</li>
					{% endfor %}
				</ul>
			</div>
		{% endif %}
	</div>

	<!-- Total Price Footer -->
	<div class="border-t border-gray-200 p-6 bg-joel-red text-white rounded-b-lg">
		<div class="text-center">
			<h5 class="text-lg font-semibold mb-2">
				Prix total pour {{ devis.duree }} jour{{ devis.duree > 1 ? 's' : '' }}
			</h5>
			<div class="text-3xl font-bold mb-1">{{ devis.prix }}€</div>
			<div class="text-sm opacity-90">
				Soit {{ (devis.prix / devis.duree)|number_format(2, '.', '') }}€ / jour
			</div>
		</div>
	</div>
</div>
