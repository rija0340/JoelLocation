<div class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden">
	<div class="p-4">
		<div class="flex justify-between items-center mb-3">
			<h4 class="text-xl font-semibold text-joel-red flex items-center">
				<i class="fa fa-users mr-2"></i> Conducteurs
			</h4>
			{% if reservation.conducteursClient|length < 2 %}
				<label for="modalConducteurToggle" class="text-joel-red text-base cursor-pointer">
					<i class="fa fa-plus-circle mr-1"></i>
					Ajouter
				</label>
			{% endif %}
		</div>
		<div class="space-y-3">
			{% set somme = 0 %}
			{% for conducteur in reservation.conducteursClient %}
				{% if conducteur.isPrincipal %}
					{% set somme = somme + 1 %}
				{% endif %}
			{% endfor %}
			{% for conducteur in reservation.conducteursClient %}
				<div class="p-3 rounded-lg {% if conducteur.isPrincipal %}bg-gray-50 border border-gray-300{% else %}bg-white border border-gray-200{% endif %}">
					<div class="flex justify-between items-start">
						<div class="flex-1">
							<div class="flex items-center mb-1">
								<span class="font-medium text-base mr-2">{{ conducteur.nom }}
									{{ conducteur.prenom }}</span>
								{% if conducteur.isPrincipal %}
									<span class="bg-joel-red text-white text-sm px-2 py-0.5 rounded">Principal</span>
								{% endif %}
							</div>
							<div class="text-sm text-gray-700 space-y-0.5">
								<div class="flex items-center">
									<i class="fa fa-id-card text-joel-red mr-1 w-3"></i>
									<span>Permis: {{ conducteur.numeroPermis }}</span>
								</div>
								<div class="flex items-center">
									<i class="fa fa-calendar text-joel-red mr-1 w-3"></i>
									<span>Délivré: {{ conducteur.dateDelivrance|date('m/Y') }} à {{ conducteur.villeDelivrance }}</span>
								</div>
							</div>
						</div>
						<div class="flex items-center space-x-1 ml-2">
							{% if somme == 0 %}
								<a href="{{ path('make_conducteur_principal', {'id': conducteur.id, 'id_resa': reservation.id}) }}" class="text-joel-red text-sm" title="Rendre Principal">
									<i class="fa fa-star"></i>
								</a>
							{% elseif conducteur.isPrincipal %}
								<a href="{{ path('remove_conducteur_principal', {'id': conducteur.id, 'id_resa': reservation.id}) }}" class="text-gray-500 text-sm" title="Retirer Principal">
									<i class="fa fa-edit"></i>
								</a>
							{% endif %}
							<a href="{{ path('conducteur_edit', {'id': conducteur.id}) }}" class="text-gray-500 text-sm" title="Modifier">
								<i class="fa fa-edit"></i>
							</a>
							<form method="post" action="{{ path('client_conducteur_remove_reservation', {'id': conducteur.id, 'id_resa' : reservation.id}) }}" onsubmit="return confirm('Êtes-vous sûre de vouloir supprimer ce conducteur ?');" class="inline-block">
								<input type="hidden" name="_method" value="DELETE">
								<input type="hidden" name="reservation" value="{{ reservation.id }}">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ conducteur.id) }}">
								<button class="text-gray-500 text-sm" title="Supprimer" type="submit">
									<i class="fa fa-trash"></i>
								</button>
							</form>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
</div>
