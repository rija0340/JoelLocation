<div class="card bg-white shadow-md rounded-lg">
  <div class="card-content p-6">
    <div class="flex justify-between items-center mb-4">
      <h5 class="font-bold text-error flex items-center">
        <i class="fas fa-id-card text-error-content mr-2"></i>
        Conducteurs
      </h5>
      {% if reservation.conducteursClient|length < 2 %}
        <label for="modalConducteurToggle" class="btn btn-ghost btn-sm text-primary">
          <i class="fas fa-plus-circle mr-1"></i>
          Ajouter un conducteur
        </label>
      {% endif %}
    </div>
    <div class="space-y-4">
      {% set somme = 0 %}
      {% for conducteur in reservation.conducteursClient %}
        {% if conducteur.isPrincipal %}
          {% set somme = somme + 1 %}
        {% endif %}
      {% endfor %}
      {% for conducteur in reservation.conducteursClient %}
        <div class="conductor-card p-4 rounded-lg {% if conducteur.isPrincipal %}bg-base-200{% else %}border border-base-300{% endif %}">
          <div class="flex justify-between items-start">
            <div>
              <div class="flex items-center mb-2">
                <span class="font-semibold mr-2">{{ conducteur.nom }} {{ conducteur.prenom }}</span>
                {% if conducteur.isPrincipal %}
                  <span class="badge badge-warning">Principal</span>
                {% endif %}
              </div>
              <small class="text-base-content/70 block">Permis: {{ conducteur.numeroPermis }}</small>
              <small class="text-base-content/70 block">Délivré: {{ conducteur.dateDelivrance|date('m/Y') }} à {{ conducteur.villeDelivrance }}</small>
            </div>
            <div class="flex items-center space-x-2">
              {% if somme == 0 %}
                <a href="{{ path('make_conducteur_principal', {'id': conducteur.id, 'id_resa': reservation.id}) }}"
                   class="btn btn-outline btn-sm btn-success flex items-center gap-1">
                  <i class="fas fa-star"></i> Rendre Principal
                </a>
              {% elseif conducteur.isPrincipal %}
                <a href="{{ path('remove_conducteur_principal', {'id': conducteur.id, 'id_resa': reservation.id}) }}"
                   class="btn btn-outline btn-sm btn-secondary flex items-center gap-1">
                  <i class="fas fa-edit"></i> Retirer Principal
                </a>
              {% endif %}
              <a href="{{ path('conducteur_edit', {'id': conducteur.id}) }}"
                 class="btn btn-ghost btn-sm text-base-content/50 tooltip"
                 data-tip="Modifier">
                <i class="fas fa-edit"></i>
              </a>
              <form method="post"
                    action="{{ path('client_conducteur_remove_reservation', {'id': conducteur.id, 'id_resa' : reservation.id}) }}"
                    onsubmit="return confirm('Êtes-vous sûre de vouloir supprimer ce conducteur ?');"
                    class="inline-block">
                <input type="hidden" name="_method" value="DELETE">
                <input type="hidden" name="reservation" value="{{ reservation.id }}">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ conducteur.id) }}">
                <button class="btn btn-ghost btn-sm text-base-content/50 tooltip" data-tip="Supprimer" type="submit">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>