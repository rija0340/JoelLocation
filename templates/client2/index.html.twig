{% extends 'baseClient2.html.twig' %}

{% block title %}Page client{% endblock %}
{% block stylesheets %}{% endblock %}

{% block body %}
  <!-- Mes informations Section -->
  <div class="bg-white rounded-lg shadow-lg p-6 mb-8 hover-lift">
    <div class="flex items-center mb-6">
      <h2 class="text-2xl font-bold title-red">Mes informations</h2>
      <div class="ml-4 w-12 h-1 bg-joel-red"></div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for label, value in {
        'Nom': client.nom,
        'Prénom': client.prenom,
        'Sexe': client.sexe,
        'Adresse email': client.mail,
        'Téléphone 1': client.telephone,
        'Téléphone 2': client.portable,
        'Adresse': client.adresse,
        'Complément adresse': client.complementAdresse,
        'Ville': client.ville,
        'Code postal': client.codePostal,
        'Date de naissance': client.dateNaissance|date('d/m/Y'),
        'Lieu de naissance': client.lieuNaissance,
        'Numéro permis': client.numeroPermis,
        'Date permis': client.datePermis|date('d/m/Y'),
        'Ville délivrance permis': client.villeDelivrancePermis
      } %}
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">{{ label }}</label>
          <input type="text"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent"
                 readonly
                 value="{{ value }}">
        </div>
      {% endfor %}
    </div>

    <div class="flex justify-center mt-8">
      <a href="{{ path('infoclient_edit', {'id': id}) }}"
         class="inline-flex items-center px-6 py-3 bg-joel-red text-white font-semibold rounded-lg hover:bg-joel-red-dark transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
        <i class="fas fa-edit mr-2"></i>
        Modifier mes informations
      </a>
    </div>
  </div>

  <!-- Mon compte Section -->
  <div class="bg-white rounded-lg shadow-lg p-6 hover-lift">
    <div class="flex items-center mb-6">
      <h3 class="text-xl font-bold title-red">Mon compte</h3>
      <div class="ml-4 w-12 h-1 bg-joel-red"></div>
    </div>

    <!-- Accordion for account management -->
    <div class="border border-gray-200 rounded-lg">
      <div class="border-b border-gray-200 last:border-b-0">
        <button class="w-full px-6 py-4 text-left bg-gray-50 hover:bg-gray-100 transition-colors duration-200 flex items-center justify-between focus:outline-none focus:bg-gray-100"
                onclick="toggleAccordion('account-section')">
          <div class="flex items-center">
            <i class="fas fa-user text-joel-red mr-3"></i>
            <span class="text-lg font-medium text-gray-900">Gérer mon compte</span>
          </div>
          <i class="fas fa-chevron-down text-gray-500 transform transition-transform duration-200" id="account-section-icon"></i>
        </button>
        <div id="account-section" class="px-6 py-6 bg-white">
          {{ form_start(formClientCompte) }}
          <div class="space-y-6">
            <div class="space-y-2">
              {{ form_label(formClientCompte.mail, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
              {{ form_widget(formClientCompte.mail, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
            </div>
            <div class="space-y-2">
              {{ form_label(formClientCompte.old_password, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
              {{ form_widget(formClientCompte.old_password, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
            </div>
            <div class="space-y-2">
              {{ form_label(formClientCompte.new_password.first, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
              {{ form_widget(formClientCompte.new_password.first, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
            </div>
            <div class="space-y-2">
              {{ form_label(formClientCompte.new_password.second, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
              {{ form_widget(formClientCompte.new_password.second, {'attr': {'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-joel-red focus:border-transparent'}}) }}
            </div>
            <div class="flex justify-center pt-4">
              <button type="submit"
                      class="inline-flex items-center px-6 py-3 bg-joel-red text-white font-semibold rounded-lg hover:bg-joel-red-dark transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                <i class="fas fa-save mr-2"></i>
                {{ button_label|default('Valider les modifications') }}
              </button>
            </div>
          </div>
          {{ form_end(formClientCompte) }}
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block javascripts %}
  <script src="{{ asset('js/client/compteClient.js') }}"></script>
  <script>
    function toggleAccordion(sectionId) {
      const section = document.getElementById(sectionId);
      const icon = document.getElementById(sectionId + '-icon');

      if (section.style.display === 'none' || section.style.display === '') {
        section.style.display = 'block';
        icon.classList.add('rotate-180');
      } else {
        section.style.display = 'none';
        icon.classList.remove('rotate-180');
      }
    }

    // Initialize accordion - show first section by default
    document.addEventListener('DOMContentLoaded', function() {
      const firstSection = document.getElementById('account-section');
      const firstIcon = document.getElementById('account-section-icon');
      if (firstSection) {
        firstSection.style.display = 'block';
        firstIcon.classList.add('rotate-180');
      }
    });
  </script>
{% endblock %}
