{% extends 'base2.html.twig' %}

{% block title %}Réservation
{% endblock %}


{% block stylesheets %}
	<link rel="stylesheet" href="{{asset('css/admin/steps.css')}}">

{% endblock %}
{% block current_page_right %}

	<div class="row">
		<div class="col-auto text-center current-step">
			<i class="fa fa-circle icon-steps "></i>
			<p class="">
				Etape 1
				<br>
				Agences & Dates
			</p>

		</div>
		<div class="col-auto text-center">
			<i class="fa fa-circle-o icon-steps "></i>
			<p>
				Etape 2
				<br>
				Véhicules
			</p>
		</div>
		<div class="col-auto text-center">
			<i class="fa fa-circle-o icon-steps "></i>
			<p>
				Etape 3
				<br>
				Options et garanties
			</p>
		</div>
		<div class="col-auto text-center">
			<i class="fa fa-circle-o icon-steps "></i>
			<p>
				Etape 4
				<br>
				Récapitulatif
			</p>
		</div>
	</div>
{% endblock %}

{% block content %}


	{{ form_start(form) }}
	<div class="x_panel">
		<div class="x_title">
			<h2 class="text-danger font-weight-bold">
				Départ :
			</h2>
			<div class="clearfix"></div>
		</div>
		<div class="row">
			<div class="form-group col-md-4">
				<div class="form-error">
					{{ form_errors(form.agenceDepart) }}
				</div>
				<label for="">Agence de départ :</label>
				{{ form_widget(form.agenceDepart) }}
			</div>

			<div class="form-group col-md-4">
				<div class="form-error">
					{{ form_errors(form.dateDepart) }}
				</div>
				<label for="">Date de départ :</label>
				{{ form_widget(form.dateDepart) }}
			</div>
			<div class="form-group col-md-4">
				<div class="form-error">
					{{ form_errors(form.typeVehicule) }}
				</div>
				<label for="">Type de véhicule :</label>
				{{ form_widget(form.typeVehicule) }}

			</div>
		</div>
	</div>

	<div class="x_panel">
		<div class="x_title">
			<h2 class="text-danger font-weight-bold">
				Retour :
			</h2>
			<div class="clearfix"></div>
		</div>
		<div class="form-group col-md-4">
			<div class="form-error">
				{{ form_errors(form.agenceRetour) }}
			</div>
			<label for="">Agence de retour:</label>
			{{ form_widget(form.agenceRetour) }}

		</div>
		<div class="form-group col-md-4">
			<div class="form-error">
				{{ form_errors(form.dateRetour) }}
			</div>
			<label for="">Date de retour:</label>
			{{ form_widget(form.dateRetour) }}

		</div>
		<div class="form-group col-md-4">
			<div class="form-error">
				{{ form_errors(form.lieuSejour) }}
			</div>
			<label for="">Lieu de séjour</label>
			{{ form_widget(form.lieuSejour) }}
		</div>

	</div>
	<div class="text-center">
		<button class="btn btn-danger" id="enregistrer">
			<i class="fa fa-book" aria-hidden="true"></i>
			{{ button_label|default('Enregistrer') }}
		</button>
	</div>
	{{ form_end(form) }}

{% endblock %}
{% block javascripts %}
	{# // <script src="{{asset('js/admin/vente_comptoir/step1.js')}}"></script> #}

	{# // <script src="{{asset('js/admin/vente_comptoir/step1.js')}}"></script> #}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"> <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
	<script type="text/javascript">
		const now = new Date();

const dateDepartInput = document.getElementById("reservation_step1_dateDepart");
const dateRetourInput = document.getElementById("reservation_step1_dateRetour");

// Only apply defaultDate: now if input has no value
const startPicker = flatpickr(dateDepartInput, {
locale: 'fr',
enableTime: true,
minDate: now,
defaultDate: dateDepartInput.value ? dateDepartInput.value : now,
dateFormat: "d/m/Y H:i",
onChange: function (selectedDates, dateStr) {
endPicker.set('minDate', selectedDates[0]);
endPicker.setDate(selectedDates[0]);
}
});

const endPicker = flatpickr(dateRetourInput, {
locale: 'fr',
enableTime: true,
minDate: now,
defaultDate: dateRetourInput.value ? dateRetourInput.value : now,
dateFormat: "d/m/Y H:i"
});
	</script>
{% endblock  %}
