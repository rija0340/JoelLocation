{% extends 'base.html.twig' %}

{% block title %}Inscription
{% endblock %}

{% block body %}
	<div
		class="container my-5">
		{# Messages flash #}
		{% for label, messages in app.flashes %}
			{% for message in messages %}
				<div class="alert alert-{{ label }} alert-dismissible fade show py-2 mb-3" role="alert">
					{% if label == 'success' %}
						<i class="fas fa-check-circle mr-1"></i>
					{% elseif label == 'danger' %}
						<i class="fas fa-exclamation-circle mr-1"></i>
					{% elseif label == 'warning' %}
						<i class="fas fa-exclamation-triangle mr-1"></i>
					{% elseif label == 'info' %}
						<i class="fas fa-info-circle mr-1"></i>
					{% endif %}
					{% if message is iterable %}
						{{ message|join(', ') }}
					{% else %}
						{{ message }}
					{% endif %}
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
			{% endfor %}
		{% endfor %}

		<div class="card shadow-sm p-4 my-4 mx-auto inscription-form">
			<h2 class="text-center mb-4">Créez votre compte</h2>

			{{ form_start(form, {'attr': {'id': 'inscription-form'}}) }}

			{# Informations personnelles #}
			<div class="form-row-section">
				<h3 class="form-section-title">
					<i class="fas fa-user"></i>Informations personnelles
				</h3>
				<div class="row">
					<div class="col-md-6">
						<div
							class="form-group">
							{# Added for consistent spacing #}
							{{ form_label(form.nom, 'Nom', {'label_attr': {'class': 'bmd-label-floating'}}) }}
							{{ form_widget(form.nom, {'attr': {'class': 'form-control', 'placeholder': 'Votre nom', 'style': '--animation-order: 1;'}}) }}

						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							{{ form_label(form.prenom, 'Prénom', {'label_attr': {'class': 'bmd-label-floating'}}) }}
							{{ form_widget(form.prenom, {'attr': {'class': 'form-control', 'placeholder': 'Votre prénom', 'style': '--animation-order: 2;'}}) }}

						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						<div class="form-group">
							{{ form_label(form.sexe, 'Sexe', {'label_attr': {'class': 'bmd-label-floating'}}) }}
							{{ form_widget(form.sexe, {'attr': {'class': 'form-control', 'style': '--animation-order: 3;'}}) }}

						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							{{ form_label(form.dateNaissance, 'Date de naissance', {'label_attr': {'class': 'bmd-label-floating'}}) }}
							{{ form_widget(form.dateNaissance, {'attr': {'class': 'form-control', 'style': '--animation-order: 4;'}}) }}

						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							{{ form_label(form.lieuNaissance, 'Lieu de naissance', {'label_attr': {'class': 'bmd-label-floating'}}) }}
							{{ form_widget(form.lieuNaissance, {'attr': {'class': 'form-control', 'placeholder': 'Lieu de naissance', 'style': '--animation-order: 5;'}}) }}

						</div>
					</div>
				</div>
			</div>

			{# Adresse #}
			<div class="form-row-section">
				<h3 class="form-section-title">
					<i class="fas fa-home"></i>Adresse
				</h3>
				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							{{ form_label(form.adresse, 'Adresse', {'label_attr': {'class': 'bmd-label-floating'}}) }}
							{{ form_widget(form.adresse, {'attr': {'class': 'form-control', 'placeholder': 'Votre adresse', 'style': '--animation-order: 6;'}}) }}

						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							{{ form_label(form.complementAdresse, 'Complément d\'adresse', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.complementAdresse, {'attr': {'class': 'form-control', 'placeholder': 'Appartement, étage, etc.', 'style': '--animation-order: 7;'}}) }}
                    
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_label(form.ville, 'Ville', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.ville, {'attr': {'class': 'form-control', 'placeholder': 'Votre ville', 'style': '--animation-order: 8;'}}) }}
                    
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_label(form.codePostal, 'Code postal', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.codePostal, {'attr': {'class': 'form-control', 'placeholder': 'Code postal', 'style': '--animation-order: 9;'}}) }}
                       
                    </div>
                </div>
            </div>
		</div>

		{# Contact #}
		<div class="form-row-section">
			<h3 class="form-section-title">
				<i class="fas fa-envelope"></i>Contact
			</h3>
			<div class="row">
                <div class="col-md-12">
                     <div class="form-group">
                        {{ form_label(form.mail, 'Email', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.mail, {'attr': {'class': 'form-control', 'placeholder': 'votre@email.com', 'style': '--animation-order: 10;'}}) }}
                        
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_label(form.telephone, 'Téléphone fixe', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.telephone, {'attr': {'class': 'form-control', 'placeholder': 'Téléphone fixe (Optionnel)', 'style': '--animation-order: 11;'}}) }}
                       
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_label(form.portable, 'Téléphone portable', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.portable, {'attr': {'class': 'form-control', 'placeholder': 'Téléphone portable', 'style': '--animation-order: 12;'}}) }}
                       
                    </div>
                </div>
            </div>
		</div>

		{# Permis de conduire #}
		<div class="form-row-section">
			<h3 class="form-section-title">
				<i class="fas fa-id-card"></i>Permis de conduire
			</h3>
			<div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_label(form.numeroPermis, 'Numéro de permis', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.numeroPermis, {'attr': {'class': 'form-control', 'placeholder': 'Numéro de permis', 'style': '--animation-order: 13;'}}) }}
                       
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        {{ form_label(form.datePermis, 'Date de délivrance', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.datePermis, {'attr': {'class': 'form-control', 'style': '--animation-order: 14;'}}) }}
                       
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        {{ form_label(form.villeDelivrancePermis, 'Ville de délivrance', {'label_attr': {'class': 'bmd-label-floating'}}) }}
                        {{ form_widget(form.villeDelivrancePermis, {'attr': {'class': 'form-control', 'placeholder': 'Ville de délivrance du permis', 'style': '--animation-order: 15;'}}) }}
                       
                    </div>
                </div>
            </div>
		</div>

		{# Mot de passe #}
		<div class="form-row-section">
			<h3 class="form-section-title">
				<i class="fas fa-lock"></i>Sécurité
			</h3>
			<div class="row">
				<div class="col-md-6">
					<div class="form-group position-relative">
						{{ form_label(form.password.first, 'Mot de passe', {'label_attr': {'class': 'small font-weight-bold'}}) }}
						{{ form_widget(form.password.first, {'attr': {'class': 'form-control', 'placeholder': 'Votre mot de passe'}}) }}
						<i class="fas fa-eye js-password-toggle"></i>
						
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-group position-relative">
						{{ form_label(form.password.second, 'Confirmation du mot de passe', {'label_attr': {'class': 'small font-weight-bold'}}) }}
						{{ form_widget(form.password.second, {'attr': {'class': 'form-control', 'placeholder': 'Confirmez votre mot de passe'}}) }}
						<i class="fas fa-eye js-password-toggle"></i>
						
					</div>
				</div>
			</div>
		</div>

		{# Terms and conditions #}
		{% if form.agreeTerms is defined %}
			<div class="form-group form-check mt-4">
				{{ form_widget(form.agreeTerms, {'attr': {'class': 'form-check-input'}}) }}
				{{ form_label(form.agreeTerms, 'J\'accepte les conditions générales', {'label_attr': {'class': 'form-check-label'}}) }}
							<div class="form-error mt-1">
								{{ form_errors(form.agreeTerms) }}
							</div>
						</div>
					{% endif %}

					<div class="text-center mt-4">
						<button type="submit" class="btn btn-danger btn-block">
							<i class="fas fa-user-plus mr-1"></i>
							Créer mon compte
						</button>
						<div class="text-center mt-3">
							<a href="{{ path('app_login') }}" class="small">
								<i class="fas fa-sign-in-alt mr-1"></i>
								Déjà inscrit ? Connectez-vous
							</a>
						</div>
					</div>
					{{ form_end(form) }}
				</div>
			</div>

			<!-- Modal for Terms and Conditions -->
			<div class="modal fade" id="termsModal" tabindex="-1" role="dialog" aria-labelledby="termsModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="termsModalLabel">Conditions générales d'utilisation</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p>Veuillez lire attentivement les conditions générales d'utilisation avant de vous inscrire.</p>
							<!-- Add your terms and conditions text here -->
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl.</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
						</div>
					</div>
				</div>
			</div>
		{% endblock %}

		{% block stylesheets %}
			{{ parent() }}
			<style>
				.inscription-form {
					border-top: 4px solid #dc3545;
					border-radius: 8px;
					transition: all 0.3s ease;
				}

				.inscription-form:hover {
					box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
				}

				.form-section-title {
					font-size: 1.2rem;
					margin-bottom: 1.5rem;
					color: #495057;
					border-bottom: 1px solid #e9ecef;
					padding-bottom: 0.5rem;
				}

				.form-section-title i {
					margin-right: 0.5rem;
					color: #dc3545;
				}

				.form-row-section {
					margin-bottom: 2rem;
				}

				.highlighted-form {
					border-left: 4px solid #28a745;
					animation: highlight 1.5s ease-out;
				}

				@keyframes highlight {
					0% {
						background-color: rgba(40, 167, 69, 0.2);
					}
					100% {
						background-color: transparent;
					}
				}

				.alert {
					font-size: 0.9rem;
				}

				.alert p {
					margin-bottom: 0;
				}

				.close {
					padding: 0.4rem;
				}

				.alert-success {
					color: #155724;
					background-color: #d4edda;
					border-color: #c3e6cb;
				}

				.alert-danger {
					color: #721c24;
					background-color: #f8d7da;
					border-color: #f5c6cb;
				}

				.alert-warning {
					color: #856404;
					background-color: #fff3cd;
					border-color: #ffeeba;
				}

				.alert-info {
					color: #0c5460;
					background-color: #d1ecf1;
					border-color: #bee5eb;
				}

				.form-control:focus {
					border-color: #dc3545;
					box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
				}

				.js-password-toggle {
					position: absolute;
					right: 10px;
					top: 38px;
					cursor: pointer;
					color: #6c757d;
				}

				.js-password-toggle:hover {
					color: #dc3545;
				}
			</style>
		{% endblock %}

		{% block javascripts %}
			{{ parent() }}
			<script>
				document.addEventListener('DOMContentLoaded', function () { // Alert close buttons
var closeButtons = document.querySelectorAll('.alert .close');
closeButtons.forEach(function (button) {
button.addEventListener('click', function () {
var alert = this.closest('.alert');
alert.classList.remove('show');
setTimeout(function () {
alert.style.display = 'none';
}, 150);
});
});

// Toggle password visibility
var toggleButtons = document.querySelectorAll('.js-password-toggle');
toggleButtons.forEach(function (button) {
button.addEventListener('click', function () {
var input = this.previousElementSibling;
var type = input.getAttribute('type') === 'password' ? 'text' : 'password';
input.setAttribute('type', type);
this.classList.toggle('fa-eye');
this.classList.toggle('fa-eye-slash');
});
});
});
			</script>
		{% endblock %}
