/*! For license information please see admin_plangen.6d4e6aa4.js.LICENSE.txt */
(self.webpackChunkhtml=self.webpackChunkhtml||[]).push([[372],{2806:()=>{$(function(){$(".wmd-view-topscroll").scroll(function(){$(".gantt_hor_scroll").scrollLeft($(this).scrollLeft())}),$(".gantt_hor_scroll").scroll(function(){$(".wmd-view-topscroll").scrollLeft($(this).scrollLeft())})})},3573:()=>{function e(){var n,i,c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",o=c.toStringTag||"@@toStringTag";function s(e,c,a,o){var s=c&&c.prototype instanceof r?c:r,d=Object.create(s.prototype);return t(d,"_invoke",function(e,t,c){var a,o,s,r=0,d=c||[],u=!1,v={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return a=e,o=0,s=n,v.n=t,l}};function m(e,t){for(o=e,s=t,i=0;!u&&r&&!c&&i<d.length;i++){var c,a=d[i],m=v.p,f=a[2];e>3?(c=f===t)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=n):a[0]<=m&&((c=e<2&&m<a[1])?(o=0,v.v=t,v.n=a[1]):m<f&&(c=e<3||a[0]>t||t>f)&&(a[4]=e,a[5]=t,v.n=f,o=0))}if(c||e>1)return l;throw u=!0,t}return function(c,d,f){if(r>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,f),o=d,s=f;(i=o<2?n:s)||!u;){a||(o?o<3?(o>1&&(v.n=-1),m(o,s)):v.n=s:v.v=s);try{if(r=2,a){if(o||(c="next"),i=a[c]){if(!(i=i.call(a,s)))throw TypeError("iterator result is not an object");if(!i.done)return i;s=i.value,o<2&&(o=0)}else 1===o&&(i=a.return)&&i.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+c+"' method"),o=1);a=n}else if((i=(u=v.n<0)?s:e.call(t,v))!==l)break}catch(e){a=n,o=1,s=e}finally{r=1}}return{value:i,done:u}}}(e,a,o),!0),d}var l={};function r(){}function d(){}function u(){}i=Object.getPrototypeOf;var v=[][a]?i(i([][a]())):(t(i={},a,function(){return this}),i),m=u.prototype=r.prototype=Object.create(v);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,t(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=u,t(m,"constructor",u),t(u,"constructor",d),d.displayName="GeneratorFunction",t(u,o,"GeneratorFunction"),t(m),t(m,o,"Generator"),t(m,a,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:f}})()}function t(e,n,i,c){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,i,c){function o(n,i){t(e,n,function(e){return this._invoke(n,i,e)})}n?a?a(e,n,{value:i,enumerable:!c,configurable:!c,writable:!c}):e[n]=i:(o("next",0),o("throw",1),o("return",2))},t(e,n,i,c)}function n(e,t,n,i,c,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,c)}function i(e){return function(){var t=this,i=arguments;return new Promise(function(c,a){var o=e.apply(t,i);function s(e){n(o,c,a,s,l,"next",e)}function l(e){n(o,c,a,s,l,"throw",e)}s(void 0)})}}var c,a,o,s,l,r,d,u,v,m;function f(e){l=e,r=e}function h(){return g.apply(this,arguments)}function g(){return(g=i(e().m(function t(){var n,i,c,a,o,s,l;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=new Date,e.p=1,e.n=2,fetch("/planningGeneralData",{timeout:3e3});case 2:return i=e.v,e.n=3,i.json();case 3:for(c=e.v,a=[],o=0;o<c.length;o++)0!==c[o].parent&&a.push(c[o]);for(object_max_date=G(a[0].end_date_formated),s=1;s<a.length;s++)object_date=G(a[s].end_date_formated),object_date.getTime()>object_max_date.getTime()&&(object_max_date=object_date);object_max_date=object_max_date.setDate(object_max_date.getDate()+5),object_max_date=new Date(object_max_date),b(n.toLocaleDateString("en"),object_max_date.toLocaleDateString("en"),20),f(c),I(A(c)),document.querySelector("div .selectAll").firstElementChild.click(),$("body").loadingModal("destroy"),o=0,$(".gantt_tree_content").each(function(){o+=1}),console.log(o),$("#gantt_here").css("max-height",55*o+"px"),e.n=5;break;case 4:e.p=4,l=e.v,alert("La requête n'a pas aboutir"),console.error("Error:",l);case 5:return e.a(2)}},t,null,[[1,4]])}))).apply(this,arguments)}function k(){return document.getElementById("my-form")}function b(e,t,n){gantt.config.readonly=!0,gantt.config.columns=[{name:"text",label:"RESSOURCES",tree:!1,width:175,resize:!1}],gantt.config.show_unscheduled=!1,gantt.config.duration_unit="minute",gantt.config.scales=[{unit:"day",step:1,format:"%d %m %Y"}],gantt.templates.task_text=function(e,t,n){return null!=n.client?n.client+" "+n.start_date_formated+" - "+n.end_date_formated:" "};var i=!1;gantt.attachEvent("onContextMenu",function(e,t,n){if(!i){if(i=!0,e){var c=gantt.getTask(e);gantt.showLightbox(c)}setTimeout(function(){i=!1},100)}});var c=!1;gantt.showLightbox=function(e){c||(c=!0,editResa(e),setTimeout(function(){c=!1},500))},gantt.hideLightbox=function(){k().style.display=""},null!=e&&null!=t&&(gantt.config.start_date=new Date(e),gantt.config.end_date=new Date(t),gantt.config.show_tasks_outside_timescale=!0),gantt.templates.scale_cell_class=function(e){if(0==e.getDay()||6==e.getDay())return"weekend"},gantt.templates.timeline_cell_class=function(e,t){if(0==t.getDay()||6==t.getDay())return"weekend"},gantt.config.min_column_width=void 0!==n?n:40,gantt.config.scale_height=50,gantt.i18n.setLocale("fr"),gantt.clearAll(),gantt.plugins({quick_info:!0}),gantt.init("gantt_here"),gantt.attachEvent("onTaskClick",function(e){return setTimeout(function(){gantt.ext.quickInfo.show(e);var t=gantt.getTask(e),n=gantt.getTask(e).id_r,i=gantt.getTask(e).etat,c=location.protocol,a=location.hostname,o=location.port,s="".concat(c,"//").concat(a);if(o&&(s+=":".concat(o)),console.log("baseUrl"),console.log(s),"stopSale"==i){var l=s+"/backoffice/"+n+"/editStopSale";gantt.ext.quickInfo.setContent({content:"Date début : "+t.start_date_formated+"<br>Date fin : "+t.end_date_formated+"<br><a class='btn btn-outline-danger' href="+l+"   >Modifier</a>"})}else{l=s+"/backoffice/reservation/details/"+n;gantt.ext.quickInfo.setContent({content:"Référence :  <a class='' href="+l+"   >"+t.reference+"</a>   <br>Agence de départ : "+t.agenceDepart+"<br>Date de départ : "+t.start_date_formated+"<br>Agence de retour : "+t.agenceRetour+"<br>Date de retour : "+t.end_date_formated+"<br>Téléphone : "+t.telClient+"<br>"})}},0),!0}),gantt.attachEvent("onTaskDblClick",function(e,t){var n=gantt.getTask(e).id_r,i=gantt.getTask(e).etat;"encours"==i&&(window.document.location="/backoffice/reservation/details/"+n),"termine"==i&&(window.document.location="/backoffice/reservation/details/"+n),"nouvelle"==i&&(window.document.location="/backoffice/reservation/details/"+n),"stopSale"==i&&(window.document.location="")})}function p(e,t,n){for(var i=e.length,c=0;c<i;c++);0!=e.length&&(gantt.parse({data:e}),null!=t&&null!=n?L(T(S(t)),T(S(n))):L(T(gantt.getSubtaskDates().start_date),T(gantt.getSubtaskDates().end_date)))}function y(e){return S(C(e)+E(6))}function _(e){return S(C(e)+E(13))}function w(e){return S(C(e)+E(29))}function x(e){return S(C(e)+E(59))}function E(e){return 864e5*e}function C(e){return new Date(e).getTime()}function S(e){return new Date(e)}function q(){if(0==c.value){var e=S(Date.now());b(e,y(e),20),document.querySelector("div .selectAll").firstElementChild.checked?p(r,e,y(e)):p(l,e,y(e))}else b(c.value,y(c.value),20),document.querySelector("div .selectAll").firstElementChild.checked?p(r,c.value,y(c.value)):p(l,c.value,y(c.value))}function B(){if(0==c.value){var e=S(Date.now());b(e,_(e),20),document.querySelector("div .selectAll").firstElementChild.checked?p(r,e,_(e)):p(l,e,_(e))}else b(c.value,_(c.value),20),document.querySelector("div .selectAll").firstElementChild.checked?p(r,c.value,_(c.value)):p(l,c.value,_(c.value))}function j(){if(0==c.value){var e=S(Date.now());b(e,w(e),10),document.querySelector("div .selectAll").firstElementChild.checked?p(r,e,w(e)):p(l,e,w(e))}else b(c.value,w(c.value),10),document.querySelector("div .selectAll").firstElementChild.checked?p(r,c.value,w(c.value)):p(l,c.value,w(c.value))}function D(){if(0==c.value){var e=S(Date.now());b(e,x(e),10),document.querySelector("div .selectAll").firstElementChild.checked?p(r,e,x(e)):p(l,e,x(e))}else b(c.value,x(c.value),10),document.querySelector("div .selectAll").firstElementChild.checked?p(r,c.value,x(c.value)):p(l,c.value,x(c.value))}function L(e,t){o.innerText="<  Du "+e+" au ",s.innerText=t+" > "}function T(e){return e.toLocaleDateString("fr-FR")}function A(e){for(var t=[],n=[],i=0;i<e.length;i++)0==e[i].parent&&t.push(e[i].marque_modele.toLowerCase());n[0]=t[0];for(var c=0,a=1;a<t.length;a++){for(var o=0;o<n.length;o++)t[a]==n[o]&&c++;0==c&&n.push(t[a]),c=0}return n}function I(e){var t=document.getElementById("checkBoxesList"),n=document.createElement("label");n.classList.add("checkbox-label"),n.classList.add("selectAll"),n.innerText="Tout cocher/décocher";var i=document.createElement("input");i.classList.add("form-check-input"),i.addEventListener("click",O,!1),i.type="checkbox";var c=document.createElement("span");c.classList.add("checkmark"),n.appendChild(i),n.appendChild(c),t.appendChild(n);for(var a=0;a<e.length;a++){var o=e[a].substring(0,e[a].indexOf(" "))+"_"+e[a].substring(e[a].lastIndexOf(" ")+1),s=document.createElement("label");s.classList.add("checkbox-label"),s.classList.add(o),s.classList.add("vehicule"),s.innerText=e[a].toUpperCase();var l=document.createElement("input");l.classList.add("form-check-input"),l.addEventListener("click",P,!1),l.type="checkbox",l.id=o;var r=document.createElement("span");r.classList.add("checkmark"),s.appendChild(l),s.appendChild(r),t.appendChild(s)}}function O(){var e=document.querySelectorAll("div .vehicule");if(this.checked){for(var t=0;t<e.length;t++)e[t].firstElementChild.checked=!0,e[t].firstElementChild.disabled=!0;0==c.value?(b(),p(r)):(b(c.value,x(c.value)),p(r,c.value,x(c.value)))}else{for(var n=0;n<e.length;n++)e[n].firstElementChild.checked=!1,e[n].firstElementChild.disabled=!1;b(),p([])}}function P(){!function(e){for(var t=document.querySelectorAll(".form-check-input"),n=[],i=[],a=1;a<t.length;a++)if(t[a].checked){var o=t[a].id;n.push(o)}for(var s=0;s<n.length;s++)for(var r=0;r<e.length;r++)if(e[r].marque_modele){var d=e[r].marque_modele.substring(0,e[r].marque_modele.indexOf(" ")).toLowerCase(),u=e[r].marque_modele.substring(e[r].marque_modele.lastIndexOf(" ")+1).toLowerCase();if(marque_modele=d+"_"+u,marque_modele==n[s]){var v=e[r].id;i.push(e[r]);for(var m=0;m<e.length;m++)e[m].parent==v&&i.push(e[m])}}l=i,0==c.value?(b(),p(l)):(b(c.value,x(c.value)),p(l,c.value,x(c.value)));i=null}(r)}function G(e){var t;return t=(t=e.split(" ")[0]).split("-"),t=new Date(t[2]+"-"+t[1]+"-"+t[0])}c=document.getElementById("datedebutplanning"),d=document.getElementById("7jours"),u=document.getElementById("14jours"),v=document.getElementById("1mois"),m=document.getElementById("2mois"),o=document.querySelector("#spandStartDate"),s=document.querySelector("#spanEndDate"),d.addEventListener("click",q,!1),u.addEventListener("click",B,!1),v.addEventListener("click",j,!1),m.addEventListener("click",D,!1),window.onload=i(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return $("body").loadingModal({text:"Chargement..."}),e.p=1,e.n=2,h();case 2:e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error retrieving data:",n);case 4:document.querySelector(".container-custom-tarif").style.display="none",document.querySelector("#has-custom-tarif").checked=!1;case 5:return e.a(2)}},t,null,[[1,3]])})),c.onchange=function(){b(a=this.value,x(a),20),p(l,a,x(a))},$("#reinit").click(function(){window.location.href="/backoffice/planning-general"})},5458:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(t,n,i,c){"use strict";function a(e,i){var c=this;return this.element=e,this.animations={doubleBounce:{html:'<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>'},rotatingPlane:{html:'<div class="sk-rotating-plane"></div>',setBackground:function(e){c.animationBox.find("*").each(function(n,i){t(i).css("background-color")&&"rgba(0, 0, 0, 0)"!=t(i).css("background-color")&&t(i).css("background-color",e)})}},wave:{html:'<div class="sk-wave"> <div class="sk-rect sk-rect1"></div> <div class="sk-rect sk-rect2"></div> <div class="sk-rect sk-rect3"></div> <div class="sk-rect sk-rect4"></div> <div class="sk-rect sk-rect5"></div> </div>'},wanderingCubes:{html:'<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>'},spinner:{html:'<div class="sk-spinner sk-spinner-pulse"></div>'},chasingDots:{html:'<div class="sk-chasing-dots"><div class="sk-child sk-dot1"></div><div class="sk-child sk-dot2"></div></div>'},threeBounce:{html:'<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>'},circle:{html:'<div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div>',setBackground:function(e){c.animationBox.children().find("*").each(function(i,c){"rgba(0, 0, 0, 0)"!==n.getComputedStyle(c,":before").getPropertyValue("background-color")&&t("body").append(t("<style data-custom-style>."+t(c).attr("class").split(" ")[0]+":before {background-color: "+e+" !important;}</style>"))})}},cubeGrid:{html:'<div class="sk-cube-grid"> <div class="sk-cube sk-cube1"></div> <div class="sk-cube sk-cube2"></div> <div class="sk-cube sk-cube3"></div> <div class="sk-cube sk-cube4"></div> <div class="sk-cube sk-cube5"></div> <div class="sk-cube sk-cube6"></div> <div class="sk-cube sk-cube7"></div> <div class="sk-cube sk-cube8"></div> <div class="sk-cube sk-cube9"></div> </div>'},fadingCircle:{html:'<div class="sk-fading-circle"> <div class="sk-circle1 sk-circle"></div> <div class="sk-circle2 sk-circle"></div> <div class="sk-circle3 sk-circle"></div> <div class="sk-circle4 sk-circle"></div> <div class="sk-circle5 sk-circle"></div> <div class="sk-circle6 sk-circle"></div> <div class="sk-circle7 sk-circle"></div> <div class="sk-circle8 sk-circle"></div> <div class="sk-circle9 sk-circle"></div> <div class="sk-circle10 sk-circle"></div> <div class="sk-circle11 sk-circle"></div> <div class="sk-circle12 sk-circle"></div> </div>',setBackground:function(e){c.animationBox.children().find("*").each(function(i,c){"rgba(0, 0, 0, 0)"!==n.getComputedStyle(c,":before").getPropertyValue("background-color")&&t("body").append(t("<style data-custom-style>."+t(c).attr("class").split(" ")[0]+":before {background-color: "+e+" !important;}</style>"))})}},foldingCube:{html:'<div class="sk-folding-cube"> <div class="sk-cube1 sk-cube"></div> <div class="sk-cube2 sk-cube"></div> <div class="sk-cube4 sk-cube"></div> <div class="sk-cube3 sk-cube"></div> </div>',setBackground:function(e){c.animationBox.find("*").each(function(i,c){"rgba(0, 0, 0, 0)"!==n.getComputedStyle(c,":before").getPropertyValue("background-color")&&t("body").append(t("<style data-custom-style>."+t(c).attr("class").split(" ")[0]+":before {background-color: "+e+" !important;}</style>"))})}}},this.settings=t.extend({},s,i),this.modal=null,this.modalText=null,this.animationBox=null,this.modalBg=null,this.currenAnimation=null,this.init(),this}var o="loadingModal",s={position:"auto",text:"",color:"#fff",opacity:"0.7",backgroundColor:"rgb(0,0,0)",animation:"doubleBounce"};t.extend(a.prototype,{init:function(){var e=t('<div class="jquery-loading-modal jquery-loading-modal--visible"></div>'),n=t('<div class="jquery-loading-modal__bg"></div>'),i=t('<div class="jquery-loading-modal__animation"></div>'),c=t('<div class="jquery-loading-modal__info-box"></div>'),a=t('<div class="jquery-loading-modal__text"></div>');""!==this.settings.text?a.html(this.settings.text):a.hide(),this.currenAnimation=this.animations[this.settings.animation],i.append(this.currenAnimation.html),c.append(i).append(a),e.append(n),e.append(c),"auto"===this.settings.position&&"body"!==this.element.tagName.toLowerCase()?(e.css("position","absolute"),t(this.element).css("position","relative")):"auto"!==this.settings.position&&t(this.element).css("position",this.settings.position),t(this.element).append(e),this.modalBg=n,this.modal=e,this.modalText=a,this.animationBox=i,this.color(this.settings.color),this.backgroundColor(this.settings.backgroundColor),this.opacity(this.settings.opacity)},hide:function(){var e=this.modal;e.removeClass("jquery-loading-modal--visible").addClass("jquery-loading-modal--hidden"),setTimeout(function(){e.hide()},1e3)},backgroundColor:function(e){this.modalBg.css({"background-color":e})},color:function(e){t("[data-custom-style]").remove(),this.modalText.css("color",e),this.currenAnimation.setBackground?this.currenAnimation.setBackground(e):this.animationBox.children().find("*").each(function(i,c){t(c).css("background-color")&&"rgba(0, 0, 0, 0)"!=t(c).css("background-color")&&t(c).css("background-color",e),"rgba(0, 0, 0, 0)"!==n.getComputedStyle(c,":before").getPropertyValue("background-color")&&t("body").append(t("<style data-custom-style>."+t(c).attr("class").split(" ")[0]+":before {background-color: "+e+" !important;}</style>"))})},opacity:function(e){this.modalBg.css({opacity:e})},show:function(){this.modal.show().removeClass("jquery-loading-modal--hidden").addClass("jquery-loading-modal--visible")},animation:function(e){this.animationBox.html(""),this.currenAnimation=this.animations[e],this.animationBox.append(this.currenAnimation.html)},destroy:function(){t("[data-custom-style]").remove(),this.modal.remove()},text:function(e){this.modalText.html(e)}}),t.fn[o]=function(n){var i,s=arguments;return n===c||"object"==e(n)?this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new a(this,n))}):"string"==typeof n&&"_"!==n[0]&&"init"!==n?(this.each(function(){var e=t.data(this,"plugin_"+o);e instanceof a&&"function"==typeof e[n]&&(i=e[n].apply(e,Array.prototype.slice.call(s,1))),"destroy"===n&&t.data(this,"plugin_"+o,null)}),i!==c?i:this):void 0}}(jQuery,window,document)},5583:()=>{document.querySelector('button[data-target="#exampleModal"]'),document.getElementById("reference"),document.getElementById("tarif-resa"),document.getElementById("tarifs-options-garanties"),document.getElementById("dateDepart"),document.getElementById("dateRetour"),document.getElementById("has-custom-tarif"),document.querySelector(".container-tarif-vehicule"),document.querySelector(".container-custom-tarif"),document.getElementById("custom-tarif"),document.getElementById("tarif-vehicule"),document.getElementById("cancelButton")},8714:(e,t,n)=>{"use strict";n(5458),n(3573),n(2806),n(5583)}},e=>{var t;t=8714,e(e.s=t)}]);