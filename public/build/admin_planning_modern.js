(self["webpackChunkhtml"] = self["webpackChunkhtml"] || []).push([["admin_planning_modern"],{

/***/ "./assets/backoffice/planning_modern/css/planning_modern.css":
/*!*******************************************************************!*\
  !*** ./assets/backoffice/planning_modern/css/planning_modern.css ***!
  \*******************************************************************/
/***/ (() => {

throw new Error("Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\nHookWebpackError: Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\nError: It looks like you're trying to use `tailwindcss` directly as a PostCSS plugin. The PostCSS plugin has moved to a separate package, so to continue using Tailwind CSS with PostCSS you'll need to install `@tailwindcss/postcss` and update your PostCSS configuration.\n    at at (/var/www/html/node_modules/tailwindcss/dist/lib.js:38:1629)\n    at LazyResult.runOnRoot (/var/www/html/node_modules/postcss/lib/lazy-result.js:361:16)\n    at LazyResult.runAsync (/var/www/html/node_modules/postcss/lib/lazy-result.js:290:26)\n    at LazyResult.async (/var/www/html/node_modules/postcss/lib/lazy-result.js:192:30)\n    at LazyResult.then (/var/www/html/node_modules/postcss/lib/lazy-result.js:436:17)\n    at tryRunOrWebpackError (/var/www/html/node_modules/webpack/lib/HookWebpackError.js:87:9)\n    at __webpack_require_module__ (/var/www/html/node_modules/webpack/lib/Compilation.js:5515:12)\n    at __webpack_require__ (/var/www/html/node_modules/webpack/lib/Compilation.js:5462:18)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5550:20\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3485:9)\n    at done (/var/www/html/node_modules/neo-async/async.js:3527:9)\n    at Hook.eval [as callAsync] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5437:43\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3482:9)\n    at timesSync (/var/www/html/node_modules/neo-async/async.js:2297:7)\n    at Object.eachLimit (/var/www/html/node_modules/neo-async/async.js:3463:5)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5399:16\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3485:9)\n    at timesSync (/var/www/html/node_modules/neo-async/async.js:2297:7)\n    at Object.eachLimit (/var/www/html/node_modules/neo-async/async.js:3463:5)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5367:15\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3485:9)\n    at done (/var/www/html/node_modules/neo-async/async.js:3527:9)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5313:8\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:3713:6\n    at /var/www/html/node_modules/webpack/lib/HookWebpackError.js:68:2\n    at Hook.eval [as callAsync] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\n    at Cache.store (/var/www/html/node_modules/webpack/lib/Cache.js:113:20)\n    at ItemCacheFacade.store (/var/www/html/node_modules/webpack/lib/CacheFacade.js:142:15)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:3712:11\n    at /var/www/html/node_modules/webpack/lib/Cache.js:97:34\n    at Array.<anonymous> (/var/www/html/node_modules/webpack/lib/cache/MemoryCachePlugin.js:46:13)\n    at /var/www/html/node_modules/webpack/lib/Cache.js:97:19\n    at Hook.eval [as callAsync] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:19:1)\n    at Cache.get (/var/www/html/node_modules/webpack/lib/Cache.js:81:18)\n    at ItemCacheFacade.get (/var/www/html/node_modules/webpack/lib/CacheFacade.js:116:15)\n    at Compilation._codeGenerationModule (/var/www/html/node_modules/webpack/lib/Compilation.js:3680:9)\n    at codeGen (/var/www/html/node_modules/webpack/lib/Compilation.js:5301:11)\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3482:9)\n    at timesSync (/var/www/html/node_modules/neo-async/async.js:2297:7)\n    at Object.eachLimit (/var/www/html/node_modules/neo-async/async.js:3463:5)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5331:14\n    at processQueue (/var/www/html/node_modules/webpack/lib/util/processAsyncTree.js:61:4)\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)\n-- inner error --\nError: Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\nError: It looks like you're trying to use `tailwindcss` directly as a PostCSS plugin. The PostCSS plugin has moved to a separate package, so to continue using Tailwind CSS with PostCSS you'll need to install `@tailwindcss/postcss` and update your PostCSS configuration.\n    at at (/var/www/html/node_modules/tailwindcss/dist/lib.js:38:1629)\n    at LazyResult.runOnRoot (/var/www/html/node_modules/postcss/lib/lazy-result.js:361:16)\n    at LazyResult.runAsync (/var/www/html/node_modules/postcss/lib/lazy-result.js:290:26)\n    at LazyResult.async (/var/www/html/node_modules/postcss/lib/lazy-result.js:192:30)\n    at LazyResult.then (/var/www/html/node_modules/postcss/lib/lazy-result.js:436:17)\n    at Object.<anonymous> (/var/www/html/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[1].use[1]!/var/www/html/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[1].use[2]!/var/www/html/assets/backoffice/planning_modern/css/planning_modern.css:1:7)\n    at /var/www/html/node_modules/webpack/lib/javascript/JavascriptModulesPlugin.js:544:10\n    at Hook.eval [as call] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:19:10), <anonymous>:7:1)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5517:39\n    at tryRunOrWebpackError (/var/www/html/node_modules/webpack/lib/HookWebpackError.js:82:7)\n    at __webpack_require_module__ (/var/www/html/node_modules/webpack/lib/Compilation.js:5515:12)\n    at __webpack_require__ (/var/www/html/node_modules/webpack/lib/Compilation.js:5462:18)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5550:20\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3485:9)\n    at done (/var/www/html/node_modules/neo-async/async.js:3527:9)\n    at Hook.eval [as callAsync] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5437:43\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3482:9)\n    at timesSync (/var/www/html/node_modules/neo-async/async.js:2297:7)\n    at Object.eachLimit (/var/www/html/node_modules/neo-async/async.js:3463:5)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5399:16\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3485:9)\n    at timesSync (/var/www/html/node_modules/neo-async/async.js:2297:7)\n    at Object.eachLimit (/var/www/html/node_modules/neo-async/async.js:3463:5)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5367:15\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3485:9)\n    at done (/var/www/html/node_modules/neo-async/async.js:3527:9)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5313:8\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:3713:6\n    at /var/www/html/node_modules/webpack/lib/HookWebpackError.js:68:2\n    at Hook.eval [as callAsync] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\n    at Cache.store (/var/www/html/node_modules/webpack/lib/Cache.js:113:20)\n    at ItemCacheFacade.store (/var/www/html/node_modules/webpack/lib/CacheFacade.js:142:15)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:3712:11\n    at /var/www/html/node_modules/webpack/lib/Cache.js:97:34\n    at Array.<anonymous> (/var/www/html/node_modules/webpack/lib/cache/MemoryCachePlugin.js:46:13)\n    at /var/www/html/node_modules/webpack/lib/Cache.js:97:19\n    at Hook.eval [as callAsync] (eval at create (/var/www/html/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:19:1)\n    at Cache.get (/var/www/html/node_modules/webpack/lib/Cache.js:81:18)\n    at ItemCacheFacade.get (/var/www/html/node_modules/webpack/lib/CacheFacade.js:116:15)\n    at Compilation._codeGenerationModule (/var/www/html/node_modules/webpack/lib/Compilation.js:3680:9)\n    at codeGen (/var/www/html/node_modules/webpack/lib/Compilation.js:5301:11)\n    at symbolIterator (/var/www/html/node_modules/neo-async/async.js:3482:9)\n    at timesSync (/var/www/html/node_modules/neo-async/async.js:2297:7)\n    at Object.eachLimit (/var/www/html/node_modules/neo-async/async.js:3463:5)\n    at /var/www/html/node_modules/webpack/lib/Compilation.js:5331:14\n    at processQueue (/var/www/html/node_modules/webpack/lib/util/processAsyncTree.js:61:4)\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)\n\nGenerated code for /var/www/html/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[1].use[1]!/var/www/html/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[1].use[2]!/var/www/html/assets/backoffice/planning_modern/css/planning_modern.css\n1 | throw new Error(\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\nError: It looks like you're trying to use `tailwindcss` directly as a PostCSS plugin. The PostCSS plugin has moved to a separate package, so to continue using Tailwind CSS with PostCSS you'll need to install `@tailwindcss/postcss` and update your PostCSS configuration.\\n    at at (/var/www/html/node_modules/tailwindcss/dist/lib.js:38:1629)\\n    at LazyResult.runOnRoot (/var/www/html/node_modules/postcss/lib/lazy-result.js:361:16)\\n    at LazyResult.runAsync (/var/www/html/node_modules/postcss/lib/lazy-result.js:290:26)\\n    at LazyResult.async (/var/www/html/node_modules/postcss/lib/lazy-result.js:192:30)\\n    at LazyResult.then (/var/www/html/node_modules/postcss/lib/lazy-result.js:436:17)\");");

/***/ }),

/***/ "./assets/backoffice/planning_modern/js/modern_planning.js":
/*!*****************************************************************!*\
  !*** ./assets/backoffice/planning_modern/js/modern_planning.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, _regeneratorDefine2(e, r, n, t); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Modern Planning JavaScript
var ModernPlanning = /*#__PURE__*/function () {
  function ModernPlanning() {
    _classCallCheck(this, ModernPlanning);
    this.data = [];
    this.filteredData = [];
    this.selectedVehicles = new Set();
    this.currentView = 'week'; // week, fortnight, month, bimonth
    this.startDate = new Date();
    this.endDate = new Date(this.startDate.getTime() + 6 * 24 * 60 * 60 * 1000); // +6 days for week view
    this.timelineWidth = 0;
    this.dayWidth = 0;
    this.init();
  }
  return _createClass(ModernPlanning, [{
    key: "init",
    value: function init() {
      this.setupEventListeners();
      this.calculateTimelineDimensions();
      this.loadInitialData();
    }
  }, {
    key: "setupEventListeners",
    value: function setupEventListeners() {
      var _document$getElementB,
        _this = this,
        _document$getElementB2,
        _document$getElementB3,
        _document$getElementB4,
        _document$getElementB5,
        _document$getElementB6,
        _document$getElementB7;
      // View controls
      (_document$getElementB = document.getElementById('btn7jours')) === null || _document$getElementB === void 0 || _document$getElementB.addEventListener('click', function () {
        return _this.changeView('week');
      });
      (_document$getElementB2 = document.getElementById('btn14jours')) === null || _document$getElementB2 === void 0 || _document$getElementB2.addEventListener('click', function () {
        return _this.changeView('fortnight');
      });
      (_document$getElementB3 = document.getElementById('btn1mois')) === null || _document$getElementB3 === void 0 || _document$getElementB3.addEventListener('click', function () {
        return _this.changeView('month');
      });
      (_document$getElementB4 = document.getElementById('btn2mois')) === null || _document$getElementB4 === void 0 || _document$getElementB4.addEventListener('click', function () {
        return _this.changeView('bimonth');
      });

      // Reset button
      (_document$getElementB5 = document.getElementById('resetPlanning')) === null || _document$getElementB5 === void 0 || _document$getElementB5.addEventListener('click', function () {
        return _this.resetPlanning();
      });

      // Vehicle filter
      (_document$getElementB6 = document.getElementById('vehicleFilter')) === null || _document$getElementB6 === void 0 || _document$getElementB6.addEventListener('input', function (e) {
        _this.filterVehicles(e.target.value);
      });

      // Date input
      (_document$getElementB7 = document.getElementById('planningDate')) === null || _document$getElementB7 === void 0 || _document$getElementB7.addEventListener('change', function (e) {
        _this.changeStartDate(e.target.value);
      });

      // Window resize handler
      window.addEventListener('resize', function () {
        _this.calculateTimelineDimensions();
        _this.renderPlanning();
      });
    }
  }, {
    key: "calculateTimelineDimensions",
    value: function calculateTimelineDimensions() {
      // Calculate the width based on the container, excluding the sidebar
      var container = document.querySelector('.main-content');
      if (container) {
        // Account for vehicle label width (200px) and some padding
        this.timelineWidth = container.clientWidth - 220;
      } else {
        // Fallback width
        this.timelineWidth = 800;
      }

      // Calculate day width based on current view
      var daysCount = this.getDaysCount();
      this.dayWidth = this.timelineWidth / daysCount;
    }
  }, {
    key: "getDaysCount",
    value: function getDaysCount() {
      var daysMap = {
        'week': 7,
        'fortnight': 14,
        'month': 30,
        'bimonth': 60
      };
      return daysMap[this.currentView] || 7;
    }
  }, {
    key: "loadInitialData",
    value: function () {
      var _loadInitialData = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
        var response, _t;
        return _regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              _context.p = 0;
              this.showLoading();
              _context.n = 1;
              return fetch('/planningGeneralData');
            case 1:
              response = _context.v;
              _context.n = 2;
              return response.json();
            case 2:
              this.data = _context.v;
              this.filteredData = _toConsumableArray(this.data);

              // Select all vehicles by default
              this.selectAllVehicles();
              this.renderVehicleList();
              this.renderPlanning();
              this.hideLoading();
              _context.n = 4;
              break;
            case 3:
              _context.p = 3;
              _t = _context.v;
              console.error('Error loading planning data:', _t);
              this.hideLoading();
              alert('Erreur lors du chargement des données de planning');
            case 4:
              return _context.a(2);
          }
        }, _callee, this, [[0, 3]]);
      }));
      function loadInitialData() {
        return _loadInitialData.apply(this, arguments);
      }
      return loadInitialData;
    }()
  }, {
    key: "changeView",
    value: function changeView(view) {
      this.currentView = view;
      this.updateDateRange();
      this.calculateTimelineDimensions();
      this.renderPlanning();
      this.updateActiveButton(view);
    }
  }, {
    key: "updateDateRange",
    value: function updateDateRange() {
      // Update end date based on current view
      var daysMap = {
        'week': 6,
        'fortnight': 13,
        'month': 29,
        'bimonth': 59
      };
      var daysToAdd = daysMap[this.currentView] || 6;
      this.endDate = new Date(this.startDate);
      this.endDate.setDate(this.startDate.getDate() + daysToAdd);
    }
  }, {
    key: "changeStartDate",
    value: function changeStartDate(dateString) {
      this.startDate = new Date(dateString);
      this.updateDateRange();
      this.calculateTimelineDimensions();
      this.renderPlanning();
    }
  }, {
    key: "filterVehicles",
    value: function filterVehicles(searchTerm) {
      if (!searchTerm) {
        this.filteredData = _toConsumableArray(this.data);
      } else {
        // Get vehicles that match the search term
        var matchingVehicles = this.data.filter(function (item) {
          return item.parent === 0 && item.text && item.text.toLowerCase().includes(searchTerm.toLowerCase());
        });

        // Include reservations for matching vehicles
        var vehicleIds = matchingVehicles.map(function (v) {
          return v.id;
        });
        this.filteredData = this.data.filter(function (item) {
          return item.parent === 0 || vehicleIds.includes(item.parent);
        });
      }
      this.renderPlanning();
      this.renderVehicleList();
    }
  }, {
    key: "resetPlanning",
    value: function resetPlanning() {
      document.getElementById('vehicleFilter').value = '';
      document.getElementById('planningDate').value = new Date().toISOString().split('T')[0];
      this.startDate = new Date();
      this.currentView = 'week';
      this.updateDateRange();
      this.calculateTimelineDimensions();
      this.selectAllVehicles();
      this.filteredData = _toConsumableArray(this.data);
      this.renderPlanning();
      this.renderVehicleList();
      this.updateActiveButton('week');
    }
  }, {
    key: "selectAllVehicles",
    value: function selectAllVehicles() {
      // Select all vehicles by default
      var vehicles = this.data.filter(function (item) {
        return item.parent === 0;
      });
      this.selectedVehicles = new Set(vehicles.map(function (v) {
        return v.id;
      }));
    }
  }, {
    key: "toggleVehicleSelection",
    value: function toggleVehicleSelection(vehicleId) {
      if (this.selectedVehicles.has(vehicleId)) {
        this.selectedVehicles["delete"](vehicleId);
      } else {
        this.selectedVehicles.add(vehicleId);
      }
      this.renderPlanning();
    }
  }, {
    key: "updateActiveButton",
    value: function updateActiveButton(activeView) {
      var _document$getElementB8;
      // Remove active class from all buttons
      document.querySelectorAll('.btn-view').forEach(function (btn) {
        btn.classList.remove('active');
      });
      // Add active class to the clicked button
      var buttonId = "btn".concat(activeView === 'week' ? '7jours' : activeView === 'fortnight' ? '14jours' : activeView === 'month' ? '1mois' : '2mois');
      (_document$getElementB8 = document.getElementById(buttonId)) === null || _document$getElementB8 === void 0 || _document$getElementB8.classList.add('active');
    }
  }, {
    key: "renderVehicleList",
    value: function renderVehicleList() {
      var _this2 = this;
      var vehicleList = document.querySelector('.vehicle-list');
      if (!vehicleList) return;

      // Get unique vehicles (items with parent = 0)
      var vehicles = this.filteredData.filter(function (item) {
        return item.parent === 0;
      });
      vehicleList.innerHTML = '';
      vehicles.forEach(function (vehicle) {
        var vehicleElement = document.createElement('div');
        vehicleElement.className = 'vehicle-item';
        if (_this2.selectedVehicles.has(vehicle.id)) {
          vehicleElement.classList.add('selected');
        }
        vehicleElement.dataset.id = vehicle.id;
        var reservationCount = _this2.getReservationsForVehicle(vehicle.id).length;
        vehicleElement.innerHTML = "\n                <div class=\"vehicle-checkbox\">\n                    <input type=\"checkbox\" ".concat(_this2.selectedVehicles.has(vehicle.id) ? 'checked' : '', ">\n                </div>\n                <div class=\"vehicle-info\">\n                    <div class=\"vehicle-name\">").concat(vehicle.text, "</div>\n                    <div class=\"reservation-count\">").concat(reservationCount, " r\xE9servation").concat(reservationCount !== 1 ? 's' : '', "</div>\n                </div>\n            ");
        vehicleElement.addEventListener('click', function (e) {
          // Prevent checkbox toggle when clicking on the checkbox itself
          if (e.target.tagName !== 'INPUT') {
            var checkbox = vehicleElement.querySelector('input');
            checkbox.checked = !checkbox.checked;
          }
          _this2.toggleVehicleSelection(vehicle.id);
        });
        vehicleList.appendChild(vehicleElement);
      });
    }
  }, {
    key: "getReservationsForVehicle",
    value: function getReservationsForVehicle(vehicleId) {
      return this.filteredData.filter(function (item) {
        return item.parent === vehicleId;
      });
    }
  }, {
    key: "renderPlanning",
    value: function renderPlanning() {
      var _this3 = this;
      var timelineHeader = document.querySelector('.timeline-header');
      var timelineBody = document.querySelector('.timeline-body');
      if (!timelineHeader || !timelineBody) return;

      // Generate timeline header
      this.generateTimelineHeader();

      // Get selected vehicles
      var vehicles = this.filteredData.filter(function (item) {
        return item.parent === 0 && _this3.selectedVehicles.has(item.id);
      });
      timelineBody.innerHTML = '';
      vehicles.forEach(function (vehicle) {
        var vehicleRow = document.createElement('div');
        vehicleRow.className = 'vehicle-row';
        var vehicleLabel = document.createElement('div');
        vehicleLabel.className = 'vehicle-label';
        vehicleLabel.textContent = vehicle.text;
        var vehicleTimeline = document.createElement('div');
        vehicleTimeline.className = 'vehicle-timeline';

        // Add reservations for this vehicle
        var reservations = _this3.getReservationsForVehicle(vehicle.id);
        reservations.forEach(function (reservation) {
          var reservationElement = _this3.createReservationElement(reservation);
          vehicleTimeline.appendChild(reservationElement);
        });
        vehicleRow.appendChild(vehicleLabel);
        vehicleRow.appendChild(vehicleTimeline);
        timelineBody.appendChild(vehicleRow);
      });
    }
  }, {
    key: "generateTimelineHeader",
    value: function generateTimelineHeader() {
      var timelineHeader = document.querySelector('.timeline-header');
      if (!timelineHeader) return;
      timelineHeader.innerHTML = '';
      var currentDate = new Date(this.startDate);
      var endDateCopy = new Date(this.endDate);

      // Include the end date in the timeline
      endDateCopy.setDate(endDateCopy.getDate() + 1);
      while (currentDate < endDateCopy) {
        var dayElement = document.createElement('div');
        dayElement.className = 'timeline-day';
        dayElement.style.width = "".concat(this.dayWidth, "px");

        // Add weekend class for styling
        if (currentDate.getDay() === 0 || currentDate.getDay() === 6) {
          dayElement.classList.add('weekend');
        }
        var dayOfWeek = currentDate.toLocaleDateString('fr-FR', {
          weekday: 'short'
        });
        var dayOfMonth = currentDate.getDate();
        var month = currentDate.toLocaleDateString('fr-FR', {
          month: 'short'
        });
        dayElement.innerHTML = "\n                <div class=\"day-name\">".concat(dayOfWeek.charAt(0).toUpperCase() + dayOfWeek.slice(1), "</div>\n                <div class=\"day-date\">").concat(dayOfMonth, " ").concat(month, "</div>\n            ");
        timelineHeader.appendChild(dayElement);
        currentDate.setDate(currentDate.getDate() + 1);
      }
    }
  }, {
    key: "createReservationElement",
    value: function createReservationElement(reservation) {
      var _this4 = this;
      var element = document.createElement('div');
      element.className = "reservation-item reservation-".concat(this.getReservationTypeClass(reservation));
      element.dataset.id = reservation.id_r;

      // Parse dates
      var startDate = this.parseDate(reservation.start_date);
      var endDate = this.parseDate(reservation.end_date_formated);

      // Calculate position and width
      var position = this.calculateReservationPosition(startDate, endDate);
      element.style.left = "".concat(position.left, "px");
      element.style.width = "".concat(position.width, "px");

      // Add status class
      if (reservation.etat) {
        element.classList.add("etat-".concat(reservation.etat));
      }
      element.innerHTML = "\n            <div class=\"reservation-content\">\n                <div class=\"reservation-client\">".concat(reservation.client, "</div>\n                <div class=\"reservation-dates\">").concat(reservation.start_date_formated, " - ").concat(reservation.end_date_formated, "</div>\n            </div>\n        ");
      element.addEventListener('click', function () {
        _this4.openReservationModal(reservation);
      });
      return element;
    }
  }, {
    key: "calculateReservationPosition",
    value: function calculateReservationPosition(startDate, endDate) {
      // Calculate the difference in days from the planning start date
      var startTime = startDate.getTime();
      var endTime = endDate.getTime();
      var planningStartTime = this.startDate.getTime();

      // Calculate position as days from start
      var startOffsetDays = (startTime - planningStartTime) / (24 * 60 * 60 * 1000);
      var durationDays = (endTime - startTime) / (24 * 60 * 60 * 1000) + 1; // +1 to include end day

      // Convert to pixels
      var left = Math.max(0, startOffsetDays * this.dayWidth);
      var width = Math.max(50, durationDays * this.dayWidth); // Minimum width of 50px

      return {
        left: left,
        width: width
      };
    }
  }, {
    key: "getReservationTypeClass",
    value: function getReservationTypeClass(reservation) {
      if (reservation.agenceDepart === "garage") return 'garage';
      if (reservation.agenceDepart && reservation.agenceDepart.includes("Aéroport")) return 'aeroport';
      if (reservation.agenceDepart && reservation.agenceDepart.includes("Gare")) return 'gare';
      if (reservation.agenceDepart && reservation.agenceDepart.includes("Agence")) return 'agence';
      return 'livraison';
    }
  }, {
    key: "parseDate",
    value: function parseDate(dateString) {
      // Parse date string in format "dd-mm-yyyy HH:MM"
      try {
        var _dateString$split = dateString.split(' '),
          _dateString$split2 = _slicedToArray(_dateString$split, 2),
          datePart = _dateString$split2[0],
          timePart = _dateString$split2[1];
        var _datePart$split = datePart.split('-'),
          _datePart$split2 = _slicedToArray(_datePart$split, 3),
          day = _datePart$split2[0],
          month = _datePart$split2[1],
          year = _datePart$split2[2];
        var _timePart$split = timePart.split(':'),
          _timePart$split2 = _slicedToArray(_timePart$split, 2),
          hours = _timePart$split2[0],
          minutes = _timePart$split2[1];
        return new Date(year, month - 1, day, hours, minutes);
      } catch (e) {
        console.error('Error parsing date:', dateString, e);
        return new Date();
      }
    }
  }, {
    key: "openReservationModal",
    value: function openReservationModal(reservation) {
      var _document$querySelect, _document$querySelect2;
      // Create modal HTML
      var modalHtml = "\n            <div class=\"modal\" id=\"reservationModal\" tabindex=\"-1\">\n                <div class=\"modal-dialog modal-lg\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <h5 class=\"modal-title\">D\xE9tails de la r\xE9servation</h5>\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\n                                <span>&times;</span>\n                            </button>\n                        </div>\n                        <div class=\"modal-body\">\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>R\xE9f\xE9rence</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"".concat(reservation.reference || '', "\" readonly>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>Client</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.client || '', "\" readonly>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>T\xE9l\xE9phone</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.telClient || '', "\" readonly>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>Immatriculation</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.immatriculation || '', "\" readonly>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>Date de d\xE9part</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.start_date_formated || '', "\" readonly>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>Date de retour</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.end_date_formated || '', "\" readonly>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>Agence de d\xE9part</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.agenceDepart || '', "\" readonly>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <div class=\"form-group\">\n                                        <label>Agence de retour</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.agenceRetour || '', "\" readonly>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-4\">\n                                    <div class=\"form-group\">\n                                        <label>Tarif v\xE9hicule</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.tarifVehicule ? reservation.tarifVehicule + ' €' : '', "\" readonly>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-4\">\n                                    <div class=\"form-group\">\n                                        <label>Options/Garanties</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.tarifOptionsGaranties ? reservation.tarifOptionsGaranties + ' €' : '', "\" readonly>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-4\">\n                                    <div class=\"form-group\">\n                                        <label>Tarif total</label>\n                                        <input type=\"text\" class=\"form-control\" value=\"").concat(reservation.tarifResa ? reservation.tarifResa + ' €' : '', "\" readonly>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Fermer</button>\n                            <button type=\"button\" class=\"btn btn-primary\" id=\"editReservationBtn\">Modifier</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ");

      // Remove existing modal if present
      var existingModal = document.getElementById('reservationModal');
      if (existingModal) {
        existingModal.remove();
      }

      // Add modal to document
      document.body.insertAdjacentHTML('beforeend', modalHtml);

      // Add event listeners
      (_document$querySelect = document.querySelector('#reservationModal .close')) === null || _document$querySelect === void 0 || _document$querySelect.addEventListener('click', function () {
        var _document$getElementB9;
        (_document$getElementB9 = document.getElementById('reservationModal')) === null || _document$getElementB9 === void 0 || _document$getElementB9.remove();
      });
      (_document$querySelect2 = document.querySelector('#reservationModal #editReservationBtn')) === null || _document$querySelect2 === void 0 || _document$querySelect2.addEventListener('click', function () {
        if (reservation.id_r) {
          window.location.href = "/backoffice/reservation/".concat(reservation.id_r, "/edit/");
        }
      });

      // Show modal using Bootstrap
      $('#reservationModal').modal('show');

      // Clean up when modal is hidden
      $('#reservationModal').on('hidden.bs.modal', function () {
        $(this).remove();
      });
    }
  }, {
    key: "showLoading",
    value: function showLoading() {
      // Create loading overlay if it doesn't exist
      if (!document.getElementById('loadingOverlay')) {
        var loadingHtml = "\n                <div id=\"loadingOverlay\" style=\"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: flex; justify-content: center; align-items: center;\">\n                    <div style=\"background: white; padding: 20px; border-radius: 8px;\">\n                        <div class=\"spinner-border text-primary\" role=\"status\">\n                            <span class=\"sr-only\">Chargement...</span>\n                        </div>\n                        <div style=\"margin-top: 10px;\">Chargement des donn\xE9es...</div>\n                    </div>\n                </div>\n            ";
        document.body.insertAdjacentHTML('beforeend', loadingHtml);
      }
    }
  }, {
    key: "hideLoading",
    value: function hideLoading() {
      var loadingOverlay = document.getElementById('loadingOverlay');
      if (loadingOverlay) {
        loadingOverlay.remove();
      }
    }
  }]);
}(); // Initialize the planning when the DOM is loaded
document.addEventListener('DOMContentLoaded', function () {
  window.modernPlanning = new ModernPlanning();
});

// Export for potential use in other modules
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ModernPlanning);

/***/ }),

/***/ "./assets/backoffice/planning_modern/planning_modern.js":
/*!**************************************************************!*\
  !*** ./assets/backoffice/planning_modern/planning_modern.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _css_planning_modern_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/planning_modern.css */ "./assets/backoffice/planning_modern/css/planning_modern.css");
/* harmony import */ var _css_planning_modern_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_planning_modern_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _js_modern_planning_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/modern_planning.js */ "./assets/backoffice/planning_modern/js/modern_planning.js");


// Import necessary libraries


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./assets/backoffice/planning_modern/planning_modern.js"));
/******/ }
]);